{"version":3,"sources":["webpack:///task.min.js","webpack:///webpack/bootstrap 2667aee38a8af50cff5d","webpack:///./src/client/index.js","webpack:///./src/client/isModern.js","webpack:///./src/client/functionToObjectURL.js","webpack:///./src/WorkerManager.js","webpack:///./src/generateTaskFactoryMethod.js","webpack:///./src/client/WebWorker.js","webpack:///./src/GeneralWorker.js","webpack:///./src/client/CompatibilityWorker.js"],"names":["task","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_isModern","_isModern2","_WorkerManager","_WorkerManager2","_generateTaskFactoryMethod","_generateTaskFactoryMethod2","defaults","maxWorkers","navigator","hardwareConcurrency","WorkerProxy","WorkerManager","_functionToObjectURL","_functionToObjectURL2","Worker","window","URL","webkitURL","worker","terminate","error","func","blob","stringFunc","toString","substring","indexOf","lastIndexOf","Blob","type","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","append","getBlob","createObjectURL","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","prototype","$config","_this","this","decorate","target","key","wrap","_next","_taskTimeout","_reissueTasksInTimedoutWorkers","_queue","length","_getWorker","setTimeout","shift","_log","run","_onWorkerTaskComplete","_onWorkerExit","_workers","filter","item","tasks","forEach","push","$options","managerCount","_WorkerProxy","_logger","logger","console","log","_workerTaskConcurrency","workerTaskConcurrency","_maxWorkers","_idleTimeout","idleTimeout","taskTimeout","_idleCheckInterval","idleCheckInterval","_warmStart","warmStart","_globals","globals","_globalsInitializationFunction","initialize","_debug","debug","JSON","stringify","_workersInitializing","bind","_flushIdleWorkers","_totalWorkersCreated","_lastTaskTimeoutCheck","Date","i","_createWorker","message","getActiveWorkerCount","_idleCheckIntervalID","setInterval","arguments","Error","function","Array","slice","taskCount","callback","Promise","resolve","reject","setGlobals","_runOnWorker","args","from","pop","clearInterval","_this2","some","startTime","forceExit","lastTaskTimestamp","_this3","idleWorkers","sort","a","b","workerId","managerId","onTaskComplete","onExit","globalsInitializationFunction","trim","then","WorkerProxyOverride","config","Object","keys","_defaults","getOwnPropertyNames","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","enumerable","writable","setPrototypeOf","_GeneralWorker2","_GeneralWorker3","WebWorker","_GeneralWorker","apply","WORKER_SOURCE","_onMessage","event","data","handleWorkerMessage","postMessage","options","_worker","addEventListener","GeneralWorker","handleWorkerExit","_onExitHandler","_onExit","kill","taskIndex","index","result","_onTaskComplete","splice","String","transferables","_purgeTasks","reason","_toConsumableArray","arr","isArray","arr2","CompatibilityWorker","_setTimeoutID","match","parseInt","map","functionBody","argNames","split","Function","concat","stack","clearTimeout"],"mappings":"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","file":"task.min.js","sourcesContent":["var task =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _isModern = __webpack_require__(1);\n\t\n\tvar _isModern2 = _interopRequireDefault(_isModern);\n\t\n\tvar _WorkerManager = __webpack_require__(3);\n\t\n\tvar _WorkerManager2 = _interopRequireDefault(_WorkerManager);\n\t\n\tvar _generateTaskFactoryMethod = __webpack_require__(4);\n\t\n\tvar _generateTaskFactoryMethod2 = _interopRequireDefault(_generateTaskFactoryMethod);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar defaults = {\n\t\tmaxWorkers: navigator.hardwareConcurrency\n\t};\n\t\n\tvar WorkerProxy = (0, _isModern2.default)() ? __webpack_require__(5) : __webpack_require__(7);\n\t\n\t// expose default instance directly\n\tmodule.exports = new _WorkerManager2.default(defaults, WorkerProxy);\n\t\n\t// allow custom settings (task.js factory)\n\tmodule.exports.defaults = (0, _generateTaskFactoryMethod2.default)(defaults, WorkerProxy, _WorkerManager2.default);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _functionToObjectURL = __webpack_require__(2);\n\t\n\tvar _functionToObjectURL2 = _interopRequireDefault(_functionToObjectURL);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = function isModern() {\n\t\tif (typeof Worker != 'undefined' && (window.URL || window.webkitURL)) {\n\t\t\ttry {\n\t\t\t\tvar worker = new Worker((0, _functionToObjectURL2.default)(function () {}));\n\t\t\t\tworker.terminate();\n\t\t\t\treturn true;\n\t\t\t} catch (error) {}\n\t\t}\n\t\n\t\treturn false;\n\t};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function functionToObjectURL(func) {\n\t\tvar blob,\n\t\t    stringFunc = func.toString();\n\t\n\t\tstringFunc = stringFunc.substring(stringFunc.indexOf('{') + 1, stringFunc.lastIndexOf('}'));\n\t\n\t\ttry {\n\t\t\tblob = new Blob([stringFunc], { 'type': 'text/javascript' });\n\t\t} catch (error) {\n\t\t\t// Backwards-compatibility\n\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\t\tblob = new BlobBuilder();\n\t\t\tblob.append(stringFunc);\n\t\t\tblob = blob.getBlob();\n\t\t}\n\t\n\t\treturn (window.URL || window.webkitURL).createObjectURL(blob);\n\t};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar WorkerManager = function () {\n\t\tfunction WorkerManager($config, WorkerProxy) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, WorkerManager);\n\t\n\t\t\tthis.decorate = function (target, key) {\n\t\t\t\ttarget[key] = _this.wrap(target[key]);\n\t\t\t\treturn target;\n\t\t\t};\n\t\n\t\t\tthis._next = function () {\n\t\t\t\tif (_this._taskTimeout) {\n\t\t\t\t\t_this._reissueTasksInTimedoutWorkers();\n\t\t\t\t}\n\t\n\t\t\t\tif (!_this._queue.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar worker = _this._getWorker();\n\t\n\t\t\t\tif (!worker) {\n\t\t\t\t\tsetTimeout(_this._next, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar task = _this._queue.shift();\n\t\t\t\t_this._log('sending tid(' + task.id + ') to wid(' + worker.id + ')');\n\t\t\t\tworker.run(task);\n\t\t\t};\n\t\n\t\t\tthis._onWorkerTaskComplete = function () {\n\t\t\t\t_this._next();\n\t\t\t};\n\t\n\t\t\tthis._onWorkerExit = function (worker) {\n\t\t\t\t_this._log('worker died, reissuing task');\n\t\n\t\t\t\t// purge dead worker from pool\n\t\t\t\t_this._workers = _this._workers.filter(function (item) {\n\t\t\t\t\treturn item != worker;\n\t\t\t\t});\n\t\n\t\t\t\t// add work back to queue\n\t\t\t\tworker.tasks.forEach(function (task) {\n\t\t\t\t\t_this._queue.push(task.$options);\n\t\t\t\t});\n\t\n\t\t\t\t// run tick\n\t\t\t\t_this._next();\n\t\t\t};\n\t\n\t\t\t$config = $config || {};\n\t\n\t\t\tthis.id = ++WorkerManager.managerCount;\n\t\n\t\t\tthis._WorkerProxy = WorkerProxy;\n\t\t\tthis._logger = $config.logger || console.log;\n\t\n\t\t\tthis._workerTaskConcurrency = ($config.workerTaskConcurrency || 1) - 1;\n\t\t\tthis._maxWorkers = $config.maxWorkers || 4;\n\t\t\tthis._idleTimeout = $config.idleTimeout === false ? false : $config.idleTimeout;\n\t\t\tthis._taskTimeout = $config.taskTimeout || 0;\n\t\t\tthis._idleCheckInterval = $config.idleCheckInterval || 1000;\n\t\t\tthis._warmStart = $config.warmStart || false;\n\t\t\tthis._globals = $config.globals;\n\t\t\tthis._globalsInitializationFunction = $config.initialize;\n\t\t\tthis._debug = $config.debug;\n\t\t\tthis._log('creating new pool : ' + JSON.stringify($config));\n\t\n\t\t\tthis._workers = [];\n\t\t\tthis._workersInitializing = [];\n\t\t\tthis._queue = [];\n\t\t\tthis._onWorkerTaskComplete = this._onWorkerTaskComplete.bind(this);\n\t\t\tthis._flushIdleWorkers = this._flushIdleWorkers.bind(this);\n\t\t\tthis._totalWorkersCreated = 0;\n\t\t\tthis._lastTaskTimeoutCheck = new Date();\n\t\n\t\t\tif (this._warmStart) {\n\t\t\t\tthis._log('warm starting workers');\n\t\n\t\t\t\tfor (var i = 0; i < this._maxWorkers; i++) {\n\t\t\t\t\tthis._createWorker();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tWorkerManager.prototype._log = function _log(message) {\n\t\t\tif (this._debug) {\n\t\t\t\tthis._logger('task.js:manager[mid(' + this.id + ')] ' + message);\n\t\t\t}\n\t\t};\n\t\n\t\tWorkerManager.prototype.getActiveWorkerCount = function getActiveWorkerCount() {\n\t\t\treturn this._workersInitializing.length + this._workers.length;\n\t\t};\n\t\n\t\tWorkerManager.prototype.run = function run(task) {\n\t\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID !== 'number') {\n\t\t\t\tthis._idleCheckIntervalID = setInterval(this._flushIdleWorkers, this._idleCheckInterval);\n\t\t\t}\n\t\n\t\t\tif (!task.arguments || typeof task.arguments.length === 'undefined') {\n\t\t\t\tthrow new Error('task.js: \"arguments\" is required property, and it must be an array/array-like');\n\t\t\t}\n\t\n\t\t\tif (!task.function && (typeof task.function !== 'function' || typeof task.function !== 'string')) {\n\t\t\t\tthrow new Error('task.js: \"function\" is required property, and it must be a string or a function');\n\t\t\t}\n\t\n\t\t\tif (_typeof(task.arguments) === 'object') {\n\t\t\t\ttask.arguments = Array.prototype.slice.call(task.arguments);\n\t\t\t}\n\t\n\t\t\ttask.id = ++WorkerManager.taskCount;\n\t\n\t\t\tthis._log('added tid(' + task.id + ') to the queue');\n\t\n\t\t\tif (!task.callback) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\ttask.resolve = resolve;\n\t\t\t\t\ttask.reject = reject;\n\t\t\t\t\tthis._queue.push(task);\n\t\t\t\t\tthis._next();\n\t\t\t\t}.bind(this));\n\t\t\t} else {\n\t\t\t\tthis._queue.push(task);\n\t\t\t\tthis._next();\n\t\t\t}\n\t\t};\n\t\n\t\tWorkerManager.prototype.setGlobals = function setGlobals(globals) {\n\t\t\t// terminate all existing workers\n\t\t\tthis._workers.forEach(function (worker) {\n\t\t\t\tworker.terminate();\n\t\t\t});\n\t\n\t\t\t// flush worker pool\n\t\t\tthis._workers = [];\n\t\n\t\t\t// replace globals\n\t\t\tthis._globals = globals;\n\t\n\t\t\tthis._next();\n\t\t};\n\t\n\t\tWorkerManager.prototype._runOnWorker = function _runOnWorker(worker, args, func) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tworker.run({\n\t\t\t\t\tid: ++WorkerManager.taskCount,\n\t\t\t\t\targuments: args,\n\t\t\t\t\tfunction: func,\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: reject\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tWorkerManager.prototype.wrap = function wrap(func) {\n\t\t\treturn function () {\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\t    callback = null;\n\t\n\t\t\t\tif (typeof args[args.length - 1] === 'function') {\n\t\t\t\t\t// apparently splice is broken in ie8\n\t\t\t\t\tcallback = args.slice(-1).pop();\n\t\t\t\t\targs = args.slice(0, -1);\n\t\t\t\t}\n\t\n\t\t\t\treturn this.run({\n\t\t\t\t\targuments: args,\n\t\t\t\t\tfunction: func,\n\t\t\t\t\tcallback: callback\n\t\t\t\t});\n\t\t\t}.bind(this);\n\t\t};\n\t\n\t\tWorkerManager.prototype.terminate = function terminate() {\n\t\t\tthis._log('terminated');\n\t\n\t\t\t// kill idle timeout (if it exists)\n\t\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID == 'number') {\n\t\t\t\tclearInterval(this._idleCheckIntervalID);\n\t\t\t\tthis._idleCheckIntervalID = null;\n\t\t\t}\n\t\n\t\t\t// terminate all existing workers\n\t\t\tthis._workers.forEach(function (worker) {\n\t\t\t\tworker.terminate();\n\t\t\t});\n\t\n\t\t\t// flush worker pool\n\t\t\tthis._workers = [];\n\t\t};\n\t\n\t\tWorkerManager.prototype._reissueTasksInTimedoutWorkers = function _reissueTasksInTimedoutWorkers() {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tif (new Date() - this._lastTaskTimeoutCheck < 5000) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tthis._lastTaskTimeoutCheck = new Date();\n\t\n\t\t\tthis._workers.forEach(function (worker) {\n\t\t\t\tworker.tasks.some(function (task) {\n\t\t\t\t\tif (new Date() - task.startTime >= _this2._taskTimeout) {\n\t\t\t\t\t\tworker.forceExit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tWorkerManager.prototype._flushIdleWorkers = function _flushIdleWorkers() {\n\t\t\tthis._log('flushing idle workers');\n\t\t\tthis._workers = this._workers.filter(function (worker) {\n\t\t\t\tif (worker.tasks.length === 0 && new Date() - worker.lastTaskTimestamp > this._idleTimeout) {\n\t\t\t\t\tworker.terminate();\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t};\n\t\n\t\tWorkerManager.prototype._getWorker = function _getWorker() {\n\t\t\tvar _this3 = this;\n\t\n\t\t\tvar idleWorkers = this._workers.filter(function (worker) {\n\t\t\t\treturn worker.tasks.length <= _this3._workerTaskConcurrency;\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn a.tasks.length - b.tasks.length;\n\t\t\t});\n\t\n\t\t\tif (idleWorkers.length) {\n\t\t\t\treturn idleWorkers[0];\n\t\t\t} else if (this._workers.length < this._maxWorkers && this._workersInitializing.length === 0) {\n\t\t\t\treturn this._createWorker();\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t\n\t\tWorkerManager.prototype._createWorker = function _createWorker() {\n\t\t\tvar workerId = ++this._totalWorkersCreated;\n\t\n\t\t\tvar worker = new this._WorkerProxy({\n\t\t\t\tdebug: this._debug,\n\t\t\t\tlogger: this._logger,\n\t\t\t\tid: workerId,\n\t\t\t\tmanagerId: this.id,\n\t\t\t\tonTaskComplete: this._onWorkerTaskComplete,\n\t\t\t\tonExit: this._onWorkerExit\n\t\t\t});\n\t\n\t\t\tif (this._globalsInitializationFunction || this._globals) {\n\t\t\t\tthis._log('running global initialization code');\n\t\t\t\tvar globalsInitializationFunction = ('\\n\\t\\t\\t\\tfunction (_globals) {\\n\\t\\t\\t\\t\\tglobals = (' + (this._globalsInitializationFunction || function (globals) {\n\t\t\t\t\treturn globals;\n\t\t\t\t}).toString() + ')(_globals || {});\\n\\t\\t\\t\\t}\\n\\t\\t\\t').trim();\n\t\n\t\t\t\tthis._workersInitializing.push(worker);\n\t\t\t\tthis._runOnWorker(worker, [this._globals || {}], globalsInitializationFunction).then(function () {\n\t\t\t\t\tthis._workersInitializing = this._workersInitializing.filter(function (item) {\n\t\t\t\t\t\treturn item != worker;\n\t\t\t\t\t});\n\t\t\t\t\tthis._workers.push(worker);\n\t\t\t\t}.bind(this));\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tthis._workers.push(worker);\n\t\t\t\treturn worker;\n\t\t\t}\n\t\t};\n\t\n\t\treturn WorkerManager;\n\t}();\n\t\n\tWorkerManager.managerCount = 0;\n\tWorkerManager.taskCount = 0;\n\t\n\t\n\tmodule.exports = WorkerManager;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function generateTaskFactoryMethod(defaults, WorkerProxy, WorkerManager) {\n\t\treturn function ($config, WorkerProxyOverride) {\n\t\t\tvar config = {};\n\t\n\t\t\t// clone defaults\n\t\t\tObject.keys(defaults).forEach(function (key) {\n\t\t\t\treturn config[key] = defaults[key];\n\t\t\t});\n\t\n\t\t\t// apply user settings\n\t\t\tObject.keys($config).forEach(function (key) {\n\t\t\t\treturn config[key] = $config[key];\n\t\t\t});\n\t\n\t\t\treturn new WorkerManager(config, WorkerProxyOverride || WorkerProxy);\n\t\t};\n\t};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _functionToObjectURL = __webpack_require__(2);\n\t\n\tvar _functionToObjectURL2 = _interopRequireDefault(_functionToObjectURL);\n\t\n\tvar _GeneralWorker2 = __webpack_require__(6);\n\t\n\tvar _GeneralWorker3 = _interopRequireDefault(_GeneralWorker2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar WebWorker = function (_GeneralWorker) {\n\t\t_inherits(WebWorker, _GeneralWorker);\n\t\n\t\tfunction WebWorker($config) {\n\t\t\t_classCallCheck(this, WebWorker);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, _GeneralWorker.apply(this, arguments));\n\t\n\t\t\t_this.WORKER_SOURCE = 'function () {\\n\\t\\tonmessage = function (event) {\\n\\t\\t\\tvar message = event.data;\\n\\n\\t\\t\\tvar args = Object.keys(message).filter(function (key) {\\n\\t\\t\\t\\treturn key.match(/^argument/);\\n\\t\\t\\t}).sort(function (a, b) {\\n\\t\\t\\t\\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\\n\\t\\t\\t}).map(function (key) {\\n\\t\\t\\t\\treturn message[key];\\n\\t\\t\\t});\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tvar result = eval(\\'(\\' + message.func + \\')\\').apply(null, args);\\n\\n\\t\\t\\t\\tif (typeof Promise != \\'undefined\\' && result instanceof Promise) {\\n\\t\\t\\t\\t\\tresult.then(function (result) {\\n\\t\\t\\t\\t\\t\\tpostMessage({id: message.id, result: result});\\n\\t\\t\\t\\t\\t}).catch(function (error) {\\n\\t\\t\\t\\t\\t\\tpostMessage({id: message.id, error: error.stack});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tpostMessage({id: message.id, result: result});\\n\\t\\t\\t\\t}\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tpostMessage({id: message.id, error: error.stack});\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}';\n\t\n\t\t\t_this._onMessage = function (event) {\n\t\t\t\tvar message = event.data;\n\t\t\t\t_this.handleWorkerMessage(message);\n\t\t\t};\n\t\n\t\t\t_this.postMessage = function (message, options) {\n\t\t\t\t_this._log('sending tid(' + message.id + ') to worker process');\n\t\t\t\t_this._worker.postMessage(message, options);\n\t\t\t};\n\t\n\t\t\t_this.terminate = function () {\n\t\t\t\t_this._log('terminated');\n\t\t\t\t_this._worker.terminate();\n\t\t\t};\n\t\n\t\t\t_this._worker = new Worker((0, _functionToObjectURL2.default)(_this.WORKER_SOURCE));\n\t\t\t_this._worker.addEventListener('message', _this._onMessage);\n\t\n\t\t\t_this._log('initialized');\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn WebWorker;\n\t}(_GeneralWorker3.default);\n\t\n\tmodule.exports = WebWorker;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar GeneralWorker = function () {\n\t\tfunction GeneralWorker($config) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, GeneralWorker);\n\t\n\t\t\tthis.handleWorkerExit = function () {\n\t\t\t\t_this._log('killed');\n\t\t\t\t_this._onExitHandler(_this);\n\t\t\t};\n\t\n\t\t\tthis.forceExit = function () {\n\t\t\t\t_this._onExit();\n\t\t\t\t_this._worker.kill();\n\t\t\t};\n\t\n\t\t\tthis.handleWorkerMessage = function (message) {\n\t\t\t\tvar taskIndex = null;\n\t\n\t\t\t\t_this.tasks.some(function (task, index) {\n\t\t\t\t\tif (message.id === task.id) {\n\t\t\t\t\t\ttaskIndex = index;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tif (taskIndex !== null) {\n\t\t\t\t\tvar task = _this.tasks[taskIndex];\n\t\t\t\t\tif (message.error) {\n\t\t\t\t\t\t_this._log('tid(' + task.id + ') has thrown an error ' + message.error);\n\t\t\t\t\t\tif (task.callback) {\n\t\t\t\t\t\t\ttask.callback(new Error('task.js: ' + message.error));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttask.reject(new Error('task.js: ' + message.error));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this._log('tid(' + task.id + ') has completed');\n\t\t\t\t\t\tif (task.callback) {\n\t\t\t\t\t\t\ttask.callback(null, message.result);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttask.resolve(message.result);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_this._onTaskComplete(_this);\n\t\t\t\t\t_this.tasks.splice(taskIndex, 1);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.id = $config.id;\n\t\t\tthis.managerId = $config.managerId;\n\t\t\tthis._debug = $config.debug;\n\t\t\tthis._logger = $config.logger;\n\t\n\t\t\tthis.tasks = [];\n\t\t\tthis.lastTaskTimestamp = null;\n\t\n\t\t\tthis._onTaskComplete = $config.onTaskComplete;\n\t\t\tthis._onExitHandler = $config.onExit;\n\t\t}\n\t\n\t\tGeneralWorker.prototype._log = function _log(message) {\n\t\t\tif (this._debug) {\n\t\t\t\tthis._logger('task.js:worker[mid(' + this.managerId + ') wid(' + this.id + ')]: ' + message);\n\t\t\t}\n\t\t};\n\t\n\t\tGeneralWorker.prototype.run = function run($options) {\n\t\t\tthis.lastTaskTimestamp = new Date();\n\t\n\t\t\tvar task = {\n\t\t\t\tid: $options.id,\n\t\t\t\tstartTime: new Date(),\n\t\t\t\tresolve: $options.resolve,\n\t\t\t\treject: $options.reject,\n\t\t\t\tcallback: $options.callback,\n\t\t\t\t$options: $options\n\t\t\t};\n\t\n\t\t\tthis.tasks.push(task);\n\t\n\t\t\tvar message = {\n\t\t\t\tid: task.id,\n\t\t\t\tfunc: String($options.function)\n\t\t\t};\n\t\n\t\t\t// because of transferables (we want to keep this object flat)\n\t\t\tObject.keys($options.arguments).forEach(function (key, index) {\n\t\t\t\tmessage['argument' + index] = $options.arguments[index];\n\t\t\t});\n\t\n\t\t\tthis.postMessage(message, $options.transferables);\n\t\t};\n\t\n\t\tGeneralWorker.prototype._purgeTasks = function _purgeTasks(reason) {\n\t\t\tthis.tasks.forEach(function (task) {\n\t\t\t\tif (task.callback) {\n\t\t\t\t\ttask.callback(reason);\n\t\t\t\t} else {\n\t\t\t\t\ttask.reject(reason);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.tasks = [];\n\t\t};\n\t\n\t\treturn GeneralWorker;\n\t}();\n\t\n\tmodule.exports = GeneralWorker;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _GeneralWorker2 = __webpack_require__(6);\n\t\n\tvar _GeneralWorker3 = _interopRequireDefault(_GeneralWorker2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar CompatibilityWorker = function (_GeneralWorker) {\n\t\t_inherits(CompatibilityWorker, _GeneralWorker);\n\t\n\t\tfunction CompatibilityWorker() {\n\t\t\t_classCallCheck(this, CompatibilityWorker);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, _GeneralWorker.apply(this, arguments));\n\t\n\t\t\t_this.postMessage = function (message, options) {\n\t\t\t\t// toss it out of the event loop\n\t\t\t\t_this._setTimeoutID = setTimeout(function () {\n\t\t\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\t\t\treturn key.match(/^argument/);\n\t\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t\t\t}).map(function (key) {\n\t\t\t\t\t\treturn message[key];\n\t\t\t\t\t});\n\t\n\t\t\t\t\tvar functionBody = message.func.substring(message.func.indexOf('{') + 1, message.func.lastIndexOf('}')),\n\t\t\t\t\t    argNames = message.func.substring(message.func.indexOf('(') + 1, message.func.indexOf(')')).split(',');\n\t\n\t\t\t\t\tvar func = new (Function.prototype.bind.apply(Function, [null].concat(_toConsumableArray(argNames), [functionBody])))();\n\t\n\t\t\t\t\t// we cant use eval\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar result = func.apply(undefined, _toConsumableArray(args));\n\t\t\t\t\t\t_this.handleWorkerMessage({ id: message.id, result: result });\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t_this.handleWorkerMessage({ id: message.id, 'error': error.stack });\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t};\n\t\n\t\t\t_this.terminate = function () {\n\t\t\t\tclearTimeout(_this._setTimeoutID);\n\t\t\t\t_this._setTimeoutID = null;\n\t\t\t};\n\t\n\t\t\t_this._setTimeoutID = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn CompatibilityWorker;\n\t}(_GeneralWorker3.default);\n\t\n\tmodule.exports = CompatibilityWorker;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// task.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2667aee38a8af50cff5d","import isModern from './isModern';\nimport WorkerManager from '../WorkerManager';\nimport generateTaskFactoryMethod from '../generateTaskFactoryMethod';\n\nconst defaults = {\n\tmaxWorkers: navigator.hardwareConcurrency\n};\n\nvar WorkerProxy = isModern() ? require('./WebWorker') : require('./CompatibilityWorker');\n\n// expose default instance directly\nmodule.exports = new WorkerManager(defaults, WorkerProxy);\n\n// allow custom settings (task.js factory)\nmodule.exports.defaults = generateTaskFactoryMethod(defaults, WorkerProxy, WorkerManager);\n\n\n// WEBPACK FOOTER //\n// ./src/client/index.js","import functionToObjectURL from './functionToObjectURL';\n\nmodule.exports = function isModern () {\n\tif (typeof Worker != 'undefined' && (window.URL || window.webkitURL)) {\n\t\ttry {\n\t\t\tvar worker = new Worker(functionToObjectURL(function () {}));\n\t\t\tworker.terminate();\n\t\t\treturn true;\n\t\t} catch (error) {}\n\t}\n\n\treturn false;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/client/isModern.js","module.exports = function functionToObjectURL (func) {\n\tvar blob,\n\t\tstringFunc = func.toString();\n\n\tstringFunc = stringFunc.substring(stringFunc.indexOf('{') + 1, stringFunc.lastIndexOf('}'))\n\n\ttry {\n\t\tblob = new Blob([stringFunc], { 'type' : 'text/javascript' });\n\t} catch (error) { // Backwards-compatibility\n\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\tblob = new BlobBuilder();\n\t\tblob.append(stringFunc);\n\t\tblob = blob.getBlob();\n\t}\n\n\treturn (window.URL || window.webkitURL).createObjectURL(blob);\n};\n\n\n// WEBPACK FOOTER //\n// ./src/client/functionToObjectURL.js","class WorkerManager {\n\tconstructor ($config, WorkerProxy) {\n\t\t$config = $config || {};\n\n\t\tthis.id = ++WorkerManager.managerCount;\n\n\t\tthis._WorkerProxy = WorkerProxy;\n\t\tthis._logger = $config.logger || console.log;\n\n\t\tthis._workerTaskConcurrency = ($config.workerTaskConcurrency || 1) - 1;\n\t\tthis._maxWorkers = $config.maxWorkers || 4;\n\t\tthis._idleTimeout = $config.idleTimeout === false ? false : $config.idleTimeout;\n\t\tthis._taskTimeout = $config.taskTimeout || 0;\n\t\tthis._idleCheckInterval = $config.idleCheckInterval || 1000;\n\t\tthis._warmStart = $config.warmStart || false;\n\t\tthis._globals = $config.globals;\n\t\tthis._globalsInitializationFunction = $config.initialize;\n\t\tthis._debug = $config.debug;\n\t\tthis._log(`creating new pool : ${JSON.stringify($config)}`);\n\n\t\tthis._workers = [];\n\t\tthis._workersInitializing = [];\n\t\tthis._queue = [];\n\t\tthis._onWorkerTaskComplete = this._onWorkerTaskComplete.bind(this);\n\t\tthis._flushIdleWorkers = this._flushIdleWorkers.bind(this);\n\t\tthis._totalWorkersCreated = 0;\n\t\tthis._lastTaskTimeoutCheck = new Date();\n\n\t\tif (this._warmStart) {\n\t\t\tthis._log(`warm starting workers`);\n\n\t\t\tfor (var i = 0; i < this._maxWorkers; i++) {\n\t\t\t\tthis._createWorker();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic managerCount = 0;\n\tstatic taskCount = 0;\n\n\t_log (message) {\n\t\tif (this._debug) {\n\t\t\tthis._logger(`task.js:manager[mid(${this.id})] ${message}`);\n\t\t}\n\t}\n\n\tgetActiveWorkerCount () {\n\t\treturn this._workersInitializing.length + this._workers.length;\n\t}\n\n\trun (task) {\n\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID !== 'number') {\n\t\t\tthis._idleCheckIntervalID = setInterval(this._flushIdleWorkers, this._idleCheckInterval);\n\t\t}\n\n\t\tif (!task.arguments || typeof task.arguments.length === 'undefined') {\n\t\t\tthrow new Error('task.js: \"arguments\" is required property, and it must be an array/array-like');\n\t\t}\n\n\t\tif (!task.function && (typeof task.function !== 'function' || typeof task.function !== 'string')) {\n\t\t\tthrow new Error('task.js: \"function\" is required property, and it must be a string or a function');\n\t\t}\n\n\t\tif (typeof task.arguments === 'object') {\n\t\t\ttask.arguments = Array.prototype.slice.call(task.arguments);\n\t\t}\n\n\t\ttask.id = ++WorkerManager.taskCount;\n\n\t\tthis._log(`added tid(${task.id}) to the queue`);\n\n\t\tif (!task.callback) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\ttask.resolve = resolve;\n\t\t\t\ttask.reject = reject;\n\t\t\t\tthis._queue.push(task);\n\t\t\t\tthis._next();\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\tthis._queue.push(task);\n\t\t\tthis._next();\n\t\t}\n\t}\n\n\tsetGlobals (globals) {\n\t\t// terminate all existing workers\n\t\tthis._workers.forEach(function (worker) {\n\t\t\tworker.terminate();\n\t\t});\n\n\t\t// flush worker pool\n\t\tthis._workers = [];\n\n\t\t// replace globals\n\t\tthis._globals = globals;\n\n\t\tthis._next();\n\t}\n\n\t_runOnWorker(worker, args, func) {\n\t\treturn new Promise (function (resolve, reject) {\n\t\t\tworker.run({\n\t\t\t\tid: ++WorkerManager.taskCount,\n\t\t\t\targuments: args,\n\t\t\t\tfunction: func,\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t});\n\t\t});\n\t}\n\n\twrap (func) {\n\t\treturn function () {\n\t\t\tvar args = Array.from(arguments),\n\t\t\t\tcallback = null;\n\n\t\t\tif (typeof args[args.length - 1] === 'function') {\n\t\t\t\t// apparently splice is broken in ie8\n\t\t\t\tcallback = args.slice(-1).pop();\n\t\t\t\targs = args.slice(0, -1);\n\t\t\t}\n\n\t\t\treturn this.run({\n\t\t\t\targuments: args,\n\t\t\t\tfunction: func,\n\t\t\t\tcallback: callback\n\t\t\t});\n\t\t}.bind(this);\n\t}\n\n\tdecorate = (target, key) => {\n\t\ttarget[key] = this.wrap(target[key]);\n\t\treturn target;\n\t}\n\n\tterminate () {\n\t\tthis._log(`terminated`);\n\n\t\t// kill idle timeout (if it exists)\n\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID == 'number') {\n\t\t\tclearInterval(this._idleCheckIntervalID);\n\t\t\tthis._idleCheckIntervalID = null;\n\t\t}\n\n\t\t// terminate all existing workers\n\t\tthis._workers.forEach(function (worker) {\n\t\t\tworker.terminate();\n\t\t});\n\n\t\t// flush worker pool\n\t\tthis._workers = [];\n\t}\n\n\t_reissueTasksInTimedoutWorkers () {\n\t\tif (new Date () - this._lastTaskTimeoutCheck < 5000) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._lastTaskTimeoutCheck = new Date();\n\n\t\tthis._workers.forEach(worker => {\n\t\t\tworker.tasks.some(task => {\n\t\t\t\tif (new Date() - task.startTime >= this._taskTimeout) {\n\t\t\t\t\tworker.forceExit();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t_next = () => {\n\t\tif (this._taskTimeout) {\n\t\t\tthis._reissueTasksInTimedoutWorkers();\n\t\t}\n\n\t\tif (!this._queue.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet worker = this._getWorker();\n\n\t\tif (!worker) {\n\t\t\tsetTimeout(this._next, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tlet task = this._queue.shift();\n\t\tthis._log(`sending tid(${task.id}) to wid(${worker.id})`)\n\t\tworker.run(task);\n\t}\n\n\t_onWorkerTaskComplete = () => {\n\t\tthis._next();\n\t}\n\n\t_onWorkerExit = (worker) => {\n\t\tthis._log(`worker died, reissuing task`);\n\n\t\t// purge dead worker from pool\n\t\tthis._workers = this._workers.filter(item => item != worker);\n\n\t\t// add work back to queue\n\t\tworker.tasks.forEach(task => {\n\t\t\tthis._queue.push(task.$options);\n\t\t});\n\n\t\t// run tick\n\t\tthis._next();\n\t}\n\n\t_flushIdleWorkers () {\n\t\tthis._log(`flushing idle workers`);\n\t\tthis._workers = this._workers.filter(function (worker) {\n\t\t\tif (worker.tasks.length === 0 && new Date() - worker.lastTaskTimestamp > this._idleTimeout) {\n\t\t\t\tworker.terminate();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, this);\n\t}\n\n\t_getWorker () {\n\t\tlet idleWorkers = this._workers\n\t\t\t.filter(worker => worker.tasks.length <= this._workerTaskConcurrency)\n\t\t\t.sort((a, b) => a.tasks.length - b.tasks.length);\n\n\t\tif (idleWorkers.length) {\n\t\t\treturn idleWorkers[0];\n\t\t} else if (this._workers.length < this._maxWorkers && this._workersInitializing.length === 0) {\n\t\t\treturn this._createWorker();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t_createWorker () {\n\t\tvar workerId = ++this._totalWorkersCreated;\n\n\t\tlet worker = new this._WorkerProxy({\n\t\t\tdebug: this._debug,\n\t\t\tlogger: this._logger,\n\t\t\tid: workerId,\n\t\t\tmanagerId: this.id,\n\t\t\tonTaskComplete: this._onWorkerTaskComplete,\n\t\t\tonExit: this._onWorkerExit\n\t\t});\n\n\t\tif (this._globalsInitializationFunction || this._globals) {\n\t\t\tthis._log(`running global initialization code`);\n\t\t\tvar globalsInitializationFunction = `\n\t\t\t\tfunction (_globals) {\n\t\t\t\t\tglobals = (${(this._globalsInitializationFunction || function (globals) {return globals}).toString()})(_globals || {});\n\t\t\t\t}\n\t\t\t`.trim();\n\n\t\t\tthis._workersInitializing.push(worker);\n\t\t\tthis._runOnWorker(worker, [this._globals || {}], globalsInitializationFunction).then(function () {\n\t\t\t\tthis._workersInitializing = this._workersInitializing.filter(item => item != worker);\n\t\t\t\tthis._workers.push(worker);\n\t\t\t}.bind(this));\n\t\t\treturn null;\n\t\t} else {\n\t\t\tthis._workers.push(worker);\n\t\t\treturn worker;\n\t\t}\n\t}\n}\n\nmodule.exports = WorkerManager;\n\n\n// WEBPACK FOOTER //\n// ./src/WorkerManager.js","module.exports = function generateTaskFactoryMethod (defaults, WorkerProxy, WorkerManager) {\n\treturn function ($config, WorkerProxyOverride) {\n\t\tlet config = {};\n\n\t\t// clone defaults\n\t\tObject.keys(defaults).forEach(key => config[key] = defaults[key]);\n\n\t\t// apply user settings\n\t\tObject.keys($config).forEach(key => config[key] = $config[key]);\n\n\t\treturn new WorkerManager(config, WorkerProxyOverride || WorkerProxy);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/generateTaskFactoryMethod.js","import functionToObjectURL from './functionToObjectURL';\nimport GeneralWorker from '../GeneralWorker';\n\nclass WebWorker extends GeneralWorker {\n\tconstructor ($config) {\n\t\tsuper(...arguments);\n\n\t\tthis._worker = new Worker(functionToObjectURL(this.WORKER_SOURCE));\n\t\tthis._worker.addEventListener('message', this._onMessage);\n\n\t\tthis._log(`initialized`);\n\t}\n\n\tWORKER_SOURCE = `function () {\n\t\tonmessage = function (event) {\n\t\t\tvar message = event.data;\n\n\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tvar result = eval('(' + message.func + ')').apply(null, args);\n\n\t\t\t\tif (typeof Promise != 'undefined' && result instanceof Promise) {\n\t\t\t\t\tresult.then(function (result) {\n\t\t\t\t\t\tpostMessage({id: message.id, result: result});\n\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\tpostMessage({id: message.id, error: error.stack});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tpostMessage({id: message.id, result: result});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tpostMessage({id: message.id, error: error.stack});\n\t\t\t}\n\t\t}\n\t}`;\n\n\t_onMessage = (event) => {\n\t\tlet message = event.data;\n\t\tthis.handleWorkerMessage(message);\n\t}\n\n\tpostMessage = (message, options) => {\n\t\tthis._log(`sending tid(${message.id}) to worker process`);\n\t\tthis._worker.postMessage(message, options);\n\t}\n\n\tterminate = () => {\n\t\tthis._log(`terminated`);\n\t\tthis._worker.terminate();\n\t}\n}\n\nmodule.exports = WebWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/client/WebWorker.js","class GeneralWorker {\n\tconstructor ($config) {\n\t\tthis.id = $config.id;\n\t\tthis.managerId = $config.managerId;\n\t\tthis._debug = $config.debug;\n\t\tthis._logger = $config.logger;\n\n\t\tthis.tasks = [];\n\t\tthis.lastTaskTimestamp = null;\n\n\t\tthis._onTaskComplete = $config.onTaskComplete;\n\t\tthis._onExitHandler = $config.onExit;\n\t}\n\n\t_log (message) {\n\t\tif (this._debug) {\n\t\t\tthis._logger(`task.js:worker[mid(${this.managerId}) wid(${this.id})]: ${message}`);\n\t\t}\n\t}\n\n\thandleWorkerExit = () => {\n\t\tthis._log('killed');\n\t\tthis._onExitHandler(this);\n\t}\n\n\tforceExit = () => {\n\t\tthis._onExit();\n\t\tthis._worker.kill();\n\t}\n\n\thandleWorkerMessage = (message) => {\n\t\tlet taskIndex = null;\n\n\t\tthis.tasks.some(function (task, index) {\n\t\t\tif (message.id === task.id) {\n\t\t\t\ttaskIndex = index;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tif (taskIndex !== null) {\n\t\t\tvar task = this.tasks[taskIndex];\n\t\t\tif (message.error) {\n\t\t\t\tthis._log(`tid(${task.id}) has thrown an error ${message.error}`);\n\t\t\t\tif (task.callback) {\n\t\t\t\t\ttask.callback(new Error(`task.js: ${message.error}`));\n\t\t\t\t} else {\n\t\t\t\t\ttask.reject(new Error(`task.js: ${message.error}`));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._log(`tid(${task.id}) has completed`);\n\t\t\t\tif (task.callback) {\n\t\t\t\t\ttask.callback(null, message.result);\n\t\t\t\t} else {\n\t\t\t\t\ttask.resolve(message.result);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._onTaskComplete(this);\n\t\t\tthis.tasks.splice(taskIndex, 1);\n\t\t}\n\t}\n\n\trun ($options) {\n\t\tthis.lastTaskTimestamp = new Date();\n\n\t\tlet task = {\n\t\t\tid: $options.id,\n\t\t\tstartTime: new Date(),\n\t\t\tresolve: $options.resolve,\n\t\t\treject: $options.reject,\n\t\t\tcallback: $options.callback,\n\t\t\t$options: $options\n\t\t};\n\n\t\tthis.tasks.push(task);\n\n\t\tlet message = {\n\t\t\tid: task.id,\n\t\t\tfunc: String($options.function)\n\t\t};\n\n\t\t// because of transferables (we want to keep this object flat)\n\t\tObject.keys($options.arguments).forEach(function (key, index) {\n\t\t\tmessage['argument' + index] = $options.arguments[index];\n\t\t});\n\n\t\tthis.postMessage(message, $options.transferables);\n\t}\n\n\t_purgeTasks(reason) {\n\t\tthis.tasks.forEach(task => {\n\t\t\tif (task.callback) {\n\t\t\t\ttask.callback(reason);\n\t\t\t} else {\n\t\t\t\ttask.reject(reason);\n\t\t\t}\n\t\t});\n\t\tthis.tasks = [];\n\t}\n}\n\nmodule.exports = GeneralWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/GeneralWorker.js","import GeneralWorker from '../GeneralWorker';\n\nclass CompatibilityWorker extends GeneralWorker {\n\tconstructor () {\n\t\tsuper(...arguments);\n\n\t\tthis._setTimeoutID = null;\n\t}\n\n\tpostMessage = (message, options) => {\n\t\t// toss it out of the event loop\n\t\tthis._setTimeoutID = setTimeout(() => {\n\t\t\tlet args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\tlet functionBody = message.func.substring(message.func.indexOf('{') + 1, message.func.lastIndexOf('}')),\n\t\t\t\targNames = message.func.substring(message.func.indexOf('(') + 1, message.func.indexOf(')')).split(',');\n\n\t\t\tlet func = (new Function(...argNames, functionBody));\n\n\t\t\t// we cant use eval\n\t\t\ttry {\n\t\t\t\tlet result = func(...args);\n\t\t\t\tthis.handleWorkerMessage({id: message.id, result: result});\n\t\t\t} catch (error) {\n\t\t\t\tthis.handleWorkerMessage({id: message.id, 'error': error.stack});\n\t\t\t}\n\t\t}, 1);\n\t}\n\n\tterminate = () => {\n\t\tclearTimeout(this._setTimeoutID);\n\t\tthis._setTimeoutID = null;\n\t}\n}\n\nmodule.exports = CompatibilityWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/client/CompatibilityWorker.js"],"sourceRoot":""}