{"version":3,"sources":["webpack:///task.min.js","webpack:///webpack/bootstrap 937570015bac86d27480","webpack:///./src/client/index.js","webpack:///./src/client/isModern.js","webpack:///./src/client/functionToObjectURL.js","webpack:///./src/WorkerManager.js","webpack:///./~/process/browser.js","webpack:///./src/generateTaskFactoryMethod.js","webpack:///./src/client/CompatibilityWorker.js","webpack:///./src/GeneralWorker.js","webpack:///./src/client/WebWorker.js"],"names":["task","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_isModern","_isModern2","_WorkerManager2","_WorkerManager3","_generateTaskFactoryMethod","_CompatibilityWorker","_CompatibilityWorker2","WorkerProxies","CompatibilityWorker","DefaultWorkerProxy","_WorkerManager","ServerWorkerManager","$config","this","WorkerManager","_functionToObjectURL","_functionToObjectURL2","Worker","window","URL","webkitURL","worker","terminate","error","func","blob","stringFunc","toString","substring","indexOf","lastIndexOf","Blob","type","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","append","getBlob","createObjectURL","process","_typeof","Symbol","iterator","_this","_next","_taskTimeout","_reissueTasksInTimedoutWorkers","_queue","_getWorker","setTimeout","shift","_log","run","_onWorkerTaskComplete","_onWorkerExit","_workers","filter","item","tasks","forEach","push","$options","managerCount","workerType","e","Error","code","console","exit","_WorkerProxy","NodeWorkerThread","_logger","logger","log","_workerTaskConcurrency","workerTaskConcurrency","_maxWorkers","maxWorkers","_idleTimeout","idleTimeout","taskTimeout","_idleCheckInterval","idleCheckInterval","_warmStart","warmStart","_globals","globals","_globalsInitializationFunction","initialize","_debug","debug","JSON","stringify","_workersInitializing","bind","_flushIdleWorkers","_totalWorkersCreated","_lastTaskTimeoutCheck","Date","_createWorker","message","getActiveWorkerCount","_idleCheckIntervalID","setInterval","arguments","function","Array","slice","taskCount","Promise","resolve","reject","_runOnWorker","args","wrap","_ref","useTransferables","from","transferables","isArray","clearInterval","_this2","some","startTime","forceExit","lastTaskTimestamp","_this3","idleWorkers","sort","a","b","workerId","managerId","onTaskComplete","onExit","globalsInitializationFunction","trim","then","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","Item","array","noop","nextTick","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","WorkerProxy","WorkerProxyOverride","config","_toConsumableArray","arr","arr2","_GeneralWorker2","_GeneralWorker3","_GeneralWorker","postMessage","options","_setTimeoutID","match","parseInt","map","functionBody","argNames","split","Function","result","handleWorkerMessage","stack","GeneralWorker","handleWorkerExit","_onExitHandler","_onExit","_worker","kill","taskIndex","index","_onTaskComplete","splice","String","_purgeTasks","reason","WebWorker","WORKER_SOURCE","_onMessage","event","data","addEventListener"],"mappings":"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","file":"task.min.js","sourcesContent":["var task =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _isModern = __webpack_require__(1);\n\t\n\tvar _isModern2 = _interopRequireDefault(_isModern);\n\t\n\tvar _WorkerManager2 = __webpack_require__(3);\n\t\n\tvar _WorkerManager3 = _interopRequireDefault(_WorkerManager2);\n\t\n\tvar _generateTaskFactoryMethod = __webpack_require__(5);\n\t\n\tvar _generateTaskFactoryMethod2 = _interopRequireDefault(_generateTaskFactoryMethod);\n\t\n\tvar _CompatibilityWorker = __webpack_require__(6);\n\t\n\tvar _CompatibilityWorker2 = _interopRequireDefault(_CompatibilityWorker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar WorkerProxies = {\n\t\tCompatibilityWorker: _CompatibilityWorker2.default\n\t};\n\t\n\tif ((0, _isModern2.default)()) {\n\t\tWorkerProxies.DefaultWorkerProxy = __webpack_require__(8);\n\t}\n\t\n\t// const defaults = {\n\t// \tmaxWorkers: navigator.hardwareConcurrency\n\t// };\n\t\n\t//var WebWorker = isModern() ? require('./WebWorker') : require('./CompatibilityWorker');\n\tmodule.exports = function (_WorkerManager) {\n\t\t_inherits(ServerWorkerManager, _WorkerManager);\n\t\n\t\tfunction ServerWorkerManager($config) {\n\t\t\t_classCallCheck(this, ServerWorkerManager);\n\t\n\t\t\treturn _possibleConstructorReturn(this, _WorkerManager.call(this, $config, WorkerProxies));\n\t\t}\n\t\n\t\treturn ServerWorkerManager;\n\t}(_WorkerManager3.default);\n\t// module.exports = class ServerWorkerManager extends WorkerManager {\n\t// \tWorkerProxies = WorkerProxies;\n\t// };\n\t// console.log(module.exports);\n\t// // expose default instance directly\n\t// module.exports = new WorkerManager(defaults, {DefaultWorkerProxy: WorkerProxy});\n\t\n\t// // allow custom settings (task.js factory)\n\t// module.exports.defaults = generateTaskFactoryMethod(defaults, {DefaultWorkerProxy: WorkerProxy}, WorkerManager);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _functionToObjectURL = __webpack_require__(2);\n\t\n\tvar _functionToObjectURL2 = _interopRequireDefault(_functionToObjectURL);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = function isModern() {\n\t\tif (typeof Worker != 'undefined' && (window.URL || window.webkitURL)) {\n\t\t\ttry {\n\t\t\t\tvar worker = new Worker((0, _functionToObjectURL2.default)(function () {}));\n\t\t\t\tworker.terminate();\n\t\t\t\treturn true;\n\t\t\t} catch (error) {}\n\t\t}\n\t\n\t\treturn false;\n\t};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function functionToObjectURL(func) {\n\t\tvar blob,\n\t\t    stringFunc = func.toString();\n\t\n\t\tstringFunc = stringFunc.substring(stringFunc.indexOf('{') + 1, stringFunc.lastIndexOf('}'));\n\t\n\t\ttry {\n\t\t\tblob = new Blob([stringFunc], { 'type': 'text/javascript' });\n\t\t} catch (error) {\n\t\t\t// Backwards-compatibility\n\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\t\tblob = new BlobBuilder();\n\t\t\tblob.append(stringFunc);\n\t\t\tblob = blob.getBlob();\n\t\t}\n\t\n\t\treturn (window.URL || window.webkitURL).createObjectURL(blob);\n\t};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar WorkerManager = function () {\n\t\tfunction WorkerManager($config, WorkerProxies) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, WorkerManager);\n\t\n\t\t\tthis._next = function () {\n\t\t\t\tif (_this._taskTimeout) {\n\t\t\t\t\t_this._reissueTasksInTimedoutWorkers();\n\t\t\t\t}\n\t\n\t\t\t\tif (!_this._queue.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar worker = _this._getWorker();\n\t\n\t\t\t\tif (!worker) {\n\t\t\t\t\tsetTimeout(_this._next, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar task = _this._queue.shift();\n\t\t\t\t_this._log('sending taskId(' + task.id + ') to workerId(' + worker.id + ')');\n\t\t\t\tworker.run(task);\n\t\t\t};\n\t\n\t\t\tthis._onWorkerTaskComplete = function () {\n\t\t\t\t_this._next();\n\t\t\t};\n\t\n\t\t\tthis._onWorkerExit = function (worker) {\n\t\t\t\t_this._log('worker died, reissuing task');\n\t\n\t\t\t\t// purge dead worker from pool\n\t\t\t\t_this._workers = _this._workers.filter(function (item) {\n\t\t\t\t\treturn item != worker;\n\t\t\t\t});\n\t\n\t\t\t\t// add work back to queue\n\t\t\t\tworker.tasks.forEach(function (task) {\n\t\t\t\t\t_this._queue.push(task.$options);\n\t\t\t\t});\n\t\n\t\t\t\t// run tick\n\t\t\t\t_this._next();\n\t\t\t};\n\t\n\t\t\t$config = $config || {};\n\t\n\t\t\tthis.id = ++WorkerManager.managerCount;\n\t\n\t\t\tif ($config.workerType === 'worker_threads') {\n\t\t\t\ttry {\n\t\t\t\t\t__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"worker_threads\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('Your current version, or configuration of Node.js does not support worker_threads.');\n\t\t\t\t\tprocess.exit(1);\n\t\t\t\t}\n\t\t\t\tthis._WorkerProxy = WorkerProxies.NodeWorkerThread;\n\t\t\t} else if ($config.workerType == 'compatibility_worker') {\n\t\t\t\tthis._WorkerProxy = WorkerProxies.CompatibilityWorker;\n\t\t\t} else {\n\t\t\t\tthis._WorkerProxy = WorkerProxies.DefaultWorkerProxy;\n\t\t\t}\n\t\n\t\t\tthis._logger = $config.logger || console.log;\n\t\n\t\t\tthis._workerTaskConcurrency = ($config.workerTaskConcurrency || 1) - 1;\n\t\t\tthis._maxWorkers = $config.maxWorkers || 4;\n\t\t\tthis._idleTimeout = $config.idleTimeout === false ? false : $config.idleTimeout;\n\t\t\tthis._taskTimeout = $config.taskTimeout || 0;\n\t\t\tthis._idleCheckInterval = $config.idleCheckInterval || 1000;\n\t\t\tthis._warmStart = $config.warmStart || false;\n\t\t\tthis._globals = $config.globals;\n\t\t\tthis._globalsInitializationFunction = $config.initialize;\n\t\t\tthis._debug = $config.debug;\n\t\t\tthis._log('creating new pool : ' + JSON.stringify($config));\n\t\n\t\t\tthis._workers = [];\n\t\t\tthis._workersInitializing = [];\n\t\t\tthis._queue = [];\n\t\t\tthis._onWorkerTaskComplete = this._onWorkerTaskComplete.bind(this);\n\t\t\tthis._flushIdleWorkers = this._flushIdleWorkers.bind(this);\n\t\t\tthis._totalWorkersCreated = 0;\n\t\t\tthis._lastTaskTimeoutCheck = new Date();\n\t\n\t\t\tif (this._warmStart) {\n\t\t\t\tthis._log('warm starting workers');\n\t\n\t\t\t\tfor (var i = 0; i < this._maxWorkers; i++) {\n\t\t\t\t\tthis._createWorker();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tWorkerManager.prototype._log = function _log(message) {\n\t\t\tif (this._debug) {\n\t\t\t\tthis._logger('task.js:manager[managerId(' + this.id + ')] ' + message);\n\t\t\t}\n\t\t};\n\t\n\t\tWorkerManager.prototype.getActiveWorkerCount = function getActiveWorkerCount() {\n\t\t\treturn this._workersInitializing.length + this._workers.length;\n\t\t};\n\t\n\t\tWorkerManager.prototype.run = function run(task) {\n\t\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID !== 'number') {\n\t\t\t\tthis._idleCheckIntervalID = setInterval(this._flushIdleWorkers, this._idleCheckInterval);\n\t\t\t}\n\t\n\t\t\tif (!task.arguments || typeof task.arguments.length === 'undefined') {\n\t\t\t\tthrow new Error('task.js: \"arguments\" is required property, and it must be an array/array-like');\n\t\t\t}\n\t\n\t\t\tif (!task.function && (typeof task.function !== 'function' || typeof task.function !== 'string')) {\n\t\t\t\tthrow new Error('task.js: \"function\" is required property, and it must be a string or a function');\n\t\t\t}\n\t\n\t\t\tif (_typeof(task.arguments) === 'object') {\n\t\t\t\ttask.arguments = Array.prototype.slice.call(task.arguments);\n\t\t\t}\n\t\n\t\t\ttask.id = ++WorkerManager.taskCount;\n\t\n\t\t\tthis._log('added taskId(' + task.id + ') to the queue');\n\t\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\ttask.resolve = resolve;\n\t\t\t\ttask.reject = reject;\n\t\t\t\tthis._queue.push(task);\n\t\t\t\tthis._next();\n\t\t\t}.bind(this));\n\t\t};\n\t\n\t\tWorkerManager.prototype._runOnWorker = function _runOnWorker(worker, args, func) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tworker.run({\n\t\t\t\t\tid: ++WorkerManager.taskCount,\n\t\t\t\t\targuments: args,\n\t\t\t\t\tfunction: func,\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: reject\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tWorkerManager.prototype.wrap = function wrap(func) {\n\t\t\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { useTransferables: false },\n\t\t\t    useTransferables = _ref.useTransferables;\n\t\n\t\t\treturn function () {\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\t    transferables = null;\n\t\n\t\t\t\tif (useTransferables) {\n\t\t\t\t\ttransferables = args.slice(-1)[0];\n\t\t\t\t\tif (!Array.isArray(transferables)) {\n\t\t\t\t\t\tthrow new Error('Task expects to be passed a transferables array as its last argument.');\n\t\t\t\t\t}\n\t\t\t\t\targs = args.slice(0, -1);\n\t\t\t\t}\n\t\n\t\t\t\treturn this.run({\n\t\t\t\t\targuments: args,\n\t\t\t\t\ttransferables: transferables,\n\t\t\t\t\tfunction: func\n\t\t\t\t});\n\t\t\t}.bind(this);\n\t\t};\n\t\n\t\tWorkerManager.prototype.terminate = function terminate() {\n\t\t\tthis._log('terminated');\n\t\n\t\t\t// kill idle timeout (if it exists)\n\t\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID == 'number') {\n\t\t\t\tclearInterval(this._idleCheckIntervalID);\n\t\t\t\tthis._idleCheckIntervalID = null;\n\t\t\t}\n\t\n\t\t\t// terminate all existing workers\n\t\t\tthis._workers.forEach(function (worker) {\n\t\t\t\tworker.terminate();\n\t\t\t});\n\t\n\t\t\t// flush worker pool\n\t\t\tthis._workers = [];\n\t\t};\n\t\n\t\tWorkerManager.prototype._reissueTasksInTimedoutWorkers = function _reissueTasksInTimedoutWorkers() {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tif (new Date() - this._lastTaskTimeoutCheck < 5000) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tthis._lastTaskTimeoutCheck = new Date();\n\t\n\t\t\tthis._workers.forEach(function (worker) {\n\t\t\t\tworker.tasks.some(function (task) {\n\t\t\t\t\tif (new Date() - task.startTime >= _this2._taskTimeout) {\n\t\t\t\t\t\tworker.forceExit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\n\t\tWorkerManager.prototype._flushIdleWorkers = function _flushIdleWorkers() {\n\t\t\tthis._log('flushing idle workers');\n\t\t\tthis._workers = this._workers.filter(function (worker) {\n\t\t\t\tif (worker.tasks.length === 0 && new Date() - worker.lastTaskTimestamp > this._idleTimeout) {\n\t\t\t\t\tworker.terminate();\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t};\n\t\n\t\tWorkerManager.prototype._getWorker = function _getWorker() {\n\t\t\tvar _this3 = this;\n\t\n\t\t\tvar idleWorkers = this._workers.filter(function (worker) {\n\t\t\t\treturn worker.tasks.length <= _this3._workerTaskConcurrency;\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn a.tasks.length - b.tasks.length;\n\t\t\t});\n\t\n\t\t\tif (idleWorkers.length) {\n\t\t\t\treturn idleWorkers[0];\n\t\t\t} else if (this._workers.length < this._maxWorkers && this._workersInitializing.length === 0) {\n\t\t\t\treturn this._createWorker();\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t\n\t\tWorkerManager.prototype._createWorker = function _createWorker() {\n\t\t\tvar workerId = ++this._totalWorkersCreated;\n\t\n\t\t\tvar worker = new this._WorkerProxy({\n\t\t\t\tdebug: this._debug,\n\t\t\t\tlogger: this._logger,\n\t\t\t\tid: workerId,\n\t\t\t\tmanagerId: this.id,\n\t\t\t\tonTaskComplete: this._onWorkerTaskComplete,\n\t\t\t\tonExit: this._onWorkerExit\n\t\t\t});\n\t\n\t\t\tif (this._globalsInitializationFunction || this._globals) {\n\t\t\t\tthis._log('running global initialization code');\n\t\t\t\tvar globalsInitializationFunction = ('\\n\\t\\t\\t\\tfunction (_globals) {\\n\\t\\t\\t\\t\\tglobals = (' + (this._globalsInitializationFunction || function (globals) {\n\t\t\t\t\treturn globals;\n\t\t\t\t}).toString() + ')(_globals || {});\\n\\t\\t\\t\\t}\\n\\t\\t\\t').trim();\n\t\n\t\t\t\tthis._workersInitializing.push(worker);\n\t\t\t\tthis._runOnWorker(worker, [this._globals || {}], globalsInitializationFunction).then(function () {\n\t\t\t\t\tthis._workersInitializing = this._workersInitializing.filter(function (item) {\n\t\t\t\t\t\treturn item != worker;\n\t\t\t\t\t});\n\t\t\t\t\tthis._workers.push(worker);\n\t\t\t\t}.bind(this));\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tthis._workers.push(worker);\n\t\t\t\treturn worker;\n\t\t\t}\n\t\t};\n\t\n\t\treturn WorkerManager;\n\t}();\n\t\n\tWorkerManager.managerCount = 0;\n\tWorkerManager.taskCount = 0;\n\t\n\t\n\tmodule.exports = WorkerManager;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function generateTaskFactoryMethod(defaults, WorkerProxy, WorkerManager) {\n\t\treturn function ($config, WorkerProxyOverride) {\n\t\t\tvar config = {};\n\t\n\t\t\t// clone defaults\n\t\t\tObject.keys(defaults).forEach(function (key) {\n\t\t\t\treturn config[key] = defaults[key];\n\t\t\t});\n\t\n\t\t\t// apply user settings\n\t\t\tObject.keys($config).forEach(function (key) {\n\t\t\t\treturn config[key] = $config[key];\n\t\t\t});\n\t\n\t\t\treturn new WorkerManager(config, WorkerProxyOverride || WorkerProxy);\n\t\t};\n\t};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _GeneralWorker2 = __webpack_require__(7);\n\t\n\tvar _GeneralWorker3 = _interopRequireDefault(_GeneralWorker2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar CompatibilityWorker = function (_GeneralWorker) {\n\t\t_inherits(CompatibilityWorker, _GeneralWorker);\n\t\n\t\tfunction CompatibilityWorker() {\n\t\t\t_classCallCheck(this, CompatibilityWorker);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, _GeneralWorker.apply(this, arguments));\n\t\n\t\t\t_this.postMessage = function (message, options) {\n\t\t\t\t// toss it out of the event loop\n\t\t\t\t_this._setTimeoutID = setTimeout(function () {\n\t\t\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\t\t\treturn key.match(/^argument/);\n\t\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t\t\t}).map(function (key) {\n\t\t\t\t\t\treturn message[key];\n\t\t\t\t\t});\n\t\n\t\t\t\t\tvar functionBody = message.func.substring(message.func.indexOf('{') + 1, message.func.lastIndexOf('}')),\n\t\t\t\t\t    argNames = message.func.substring(message.func.indexOf('(') + 1, message.func.indexOf(')')).split(',');\n\t\n\t\t\t\t\tvar func = new (Function.prototype.bind.apply(Function, [null].concat(_toConsumableArray(argNames), [functionBody])))();\n\t\n\t\t\t\t\t// we cant use eval\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar result = func.apply(undefined, _toConsumableArray(args));\n\t\t\t\t\t\t_this.handleWorkerMessage({ id: message.id, result: result });\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t_this.handleWorkerMessage({ id: message.id, 'error': error.stack });\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t};\n\t\n\t\t\t_this.terminate = function () {\n\t\t\t\tclearTimeout(_this._setTimeoutID);\n\t\t\t\t_this._setTimeoutID = null;\n\t\t\t};\n\t\n\t\t\t_this._setTimeoutID = null;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn CompatibilityWorker;\n\t}(_GeneralWorker3.default);\n\t\n\tmodule.exports = CompatibilityWorker;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar GeneralWorker = function () {\n\t\tfunction GeneralWorker($config) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, GeneralWorker);\n\t\n\t\t\tthis.handleWorkerExit = function () {\n\t\t\t\t_this._log('killed');\n\t\t\t\t_this._onExitHandler(_this);\n\t\t\t};\n\t\n\t\t\tthis.forceExit = function () {\n\t\t\t\t_this._onExit();\n\t\t\t\t_this._worker.kill();\n\t\t\t};\n\t\n\t\t\tthis.handleWorkerMessage = function (message) {\n\t\t\t\tvar taskIndex = null;\n\t\n\t\t\t\t_this.tasks.some(function (task, index) {\n\t\t\t\t\tif (message.id === task.id) {\n\t\t\t\t\t\ttaskIndex = index;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tif (taskIndex !== null) {\n\t\t\t\t\tvar task = _this.tasks[taskIndex];\n\t\t\t\t\tif (message.error) {\n\t\t\t\t\t\t_this._log('taskId(' + task.id + ') has thrown an error ' + message.error);\n\t\t\t\t\t\ttask.reject(new Error('task.js: ' + message.error));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this._log('taskId(' + task.id + ') has completed');\n\t\t\t\t\t\ttask.resolve(message.result);\n\t\t\t\t\t}\n\t\t\t\t\t_this._onTaskComplete(_this);\n\t\t\t\t\t_this.tasks.splice(taskIndex, 1);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.id = $config.id;\n\t\t\tthis.managerId = $config.managerId;\n\t\t\tthis._debug = $config.debug;\n\t\t\tthis._logger = $config.logger;\n\t\n\t\t\tthis.tasks = [];\n\t\t\tthis.lastTaskTimestamp = null;\n\t\n\t\t\tthis._onTaskComplete = $config.onTaskComplete;\n\t\t\tthis._onExitHandler = $config.onExit;\n\t\t}\n\t\n\t\tGeneralWorker.prototype._log = function _log(message) {\n\t\t\tif (this._debug) {\n\t\t\t\tthis._logger('task.js:worker[managerId(' + this.managerId + ') workerId(' + this.id + ')]: ' + message);\n\t\t\t}\n\t\t};\n\t\n\t\tGeneralWorker.prototype.run = function run($options) {\n\t\t\tthis.lastTaskTimestamp = new Date();\n\t\n\t\t\tvar task = {\n\t\t\t\tid: $options.id,\n\t\t\t\tstartTime: new Date(),\n\t\t\t\tresolve: $options.resolve,\n\t\t\t\treject: $options.reject,\n\t\t\t\t$options: $options\n\t\t\t};\n\t\n\t\t\tthis.tasks.push(task);\n\t\n\t\t\tvar message = {\n\t\t\t\tid: task.id,\n\t\t\t\tfunc: String($options.function)\n\t\t\t};\n\t\n\t\t\t// because of transferables (we want to keep this object flat)\n\t\t\tObject.keys($options.arguments).forEach(function (key, index) {\n\t\t\t\tmessage['argument' + index] = $options.arguments[index];\n\t\t\t});\n\t\n\t\t\tthis.postMessage(message, $options.transferables);\n\t\t};\n\t\n\t\tGeneralWorker.prototype._purgeTasks = function _purgeTasks(reason) {\n\t\t\tthis.tasks.forEach(function (task) {\n\t\t\t\ttask.reject(reason);\n\t\t\t});\n\t\t\tthis.tasks = [];\n\t\t};\n\t\n\t\treturn GeneralWorker;\n\t}();\n\t\n\tmodule.exports = GeneralWorker;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _functionToObjectURL = __webpack_require__(2);\n\t\n\tvar _functionToObjectURL2 = _interopRequireDefault(_functionToObjectURL);\n\t\n\tvar _GeneralWorker2 = __webpack_require__(7);\n\t\n\tvar _GeneralWorker3 = _interopRequireDefault(_GeneralWorker2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar WebWorker = function (_GeneralWorker) {\n\t\t_inherits(WebWorker, _GeneralWorker);\n\t\n\t\tfunction WebWorker($config) {\n\t\t\t_classCallCheck(this, WebWorker);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, _GeneralWorker.apply(this, arguments));\n\t\n\t\t\t_this.WORKER_SOURCE = 'function () {\\n\\t\\tonmessage = function (event) {\\n\\t\\t\\tvar message = event.data;\\n\\n\\t\\t\\tvar args = Object.keys(message).filter(function (key) {\\n\\t\\t\\t\\treturn key.match(/^argument/);\\n\\t\\t\\t}).sort(function (a, b) {\\n\\t\\t\\t\\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\\n\\t\\t\\t}).map(function (key) {\\n\\t\\t\\t\\treturn message[key];\\n\\t\\t\\t});\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tvar result = eval(\\'(\\' + message.func + \\')\\').apply(null, args);\\n\\n\\t\\t\\t\\tif (typeof Promise != \\'undefined\\' && result instanceof Promise) {\\n\\t\\t\\t\\t\\tresult.then(function (result) {\\n\\t\\t\\t\\t\\t\\tpostMessage({id: message.id, result: result});\\n\\t\\t\\t\\t\\t}).catch(function (error) {\\n\\t\\t\\t\\t\\t\\tpostMessage({id: message.id, error: error.stack});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tpostMessage({id: message.id, result: result});\\n\\t\\t\\t\\t}\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tpostMessage({id: message.id, error: error.stack});\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}';\n\t\n\t\t\t_this._onMessage = function (event) {\n\t\t\t\tvar message = event.data;\n\t\t\t\t_this.handleWorkerMessage(message);\n\t\t\t};\n\t\n\t\t\t_this.postMessage = function (message, options) {\n\t\t\t\t_this._log('sending taskId(' + message.id + ') to worker process');\n\t\t\t\t_this._worker.postMessage(message, options);\n\t\t\t};\n\t\n\t\t\t_this.terminate = function () {\n\t\t\t\t_this._log('terminated');\n\t\t\t\t_this._worker.terminate();\n\t\t\t};\n\t\n\t\t\t_this._worker = new Worker((0, _functionToObjectURL2.default)(_this.WORKER_SOURCE));\n\t\t\t_this._worker.addEventListener('message', _this._onMessage);\n\t\n\t\t\t_this._log('initialized');\n\t\t\treturn _this;\n\t\t}\n\t\n\t\treturn WebWorker;\n\t}(_GeneralWorker3.default);\n\t\n\tmodule.exports = WebWorker;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// task.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 937570015bac86d27480","import isModern from './isModern';\nimport WorkerManager from '../WorkerManager';\nimport generateTaskFactoryMethod from '../generateTaskFactoryMethod';\nimport CompatibilityWorker from './CompatibilityWorker';\n\nlet WorkerProxies = {\n\tCompatibilityWorker\n};\n\nif (isModern()) {\n\tWorkerProxies.DefaultWorkerProxy = require('./WebWorker');\n}\n\n// const defaults = {\n// \tmaxWorkers: navigator.hardwareConcurrency\n// };\n\n//var WebWorker = isModern() ? require('./WebWorker') : require('./CompatibilityWorker');\nmodule.exports = class ServerWorkerManager extends WorkerManager {\n\tconstructor ($config) {\n\t\tsuper($config, WorkerProxies);\n\t}\n};\n// module.exports = class ServerWorkerManager extends WorkerManager {\n// \tWorkerProxies = WorkerProxies;\n// };\n// console.log(module.exports);\n// // expose default instance directly\n// module.exports = new WorkerManager(defaults, {DefaultWorkerProxy: WorkerProxy});\n\n// // allow custom settings (task.js factory)\n// module.exports.defaults = generateTaskFactoryMethod(defaults, {DefaultWorkerProxy: WorkerProxy}, WorkerManager);\n\n\n// WEBPACK FOOTER //\n// ./src/client/index.js","import functionToObjectURL from './functionToObjectURL';\n\nmodule.exports = function isModern () {\n\tif (typeof Worker != 'undefined' && (window.URL || window.webkitURL)) {\n\t\ttry {\n\t\t\tvar worker = new Worker(functionToObjectURL(function () {}));\n\t\t\tworker.terminate();\n\t\t\treturn true;\n\t\t} catch (error) {}\n\t}\n\n\treturn false;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/client/isModern.js","module.exports = function functionToObjectURL (func) {\n\tvar blob,\n\t\tstringFunc = func.toString();\n\n\tstringFunc = stringFunc.substring(stringFunc.indexOf('{') + 1, stringFunc.lastIndexOf('}'))\n\n\ttry {\n\t\tblob = new Blob([stringFunc], { 'type' : 'text/javascript' });\n\t} catch (error) { // Backwards-compatibility\n\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\t\tblob = new BlobBuilder();\n\t\tblob.append(stringFunc);\n\t\tblob = blob.getBlob();\n\t}\n\n\treturn (window.URL || window.webkitURL).createObjectURL(blob);\n};\n\n\n// WEBPACK FOOTER //\n// ./src/client/functionToObjectURL.js","class WorkerManager {\n\tconstructor ($config, WorkerProxies) {\n\t\t$config = $config || {};\n\n\t\tthis.id = ++WorkerManager.managerCount;\n\n\t\tif ($config.workerType === 'worker_threads') {\n\t\t\ttry {\n\t\t\t\trequire('worker_threads');\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Your current version, or configuration of Node.js does not support worker_threads.')\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\t\t\tthis._WorkerProxy = WorkerProxies.NodeWorkerThread;\n\t\t} else if ($config.workerType == 'compatibility_worker') {\n\t\t\tthis._WorkerProxy = WorkerProxies.CompatibilityWorker;\n\t\t} else {\n\t\t\tthis._WorkerProxy = WorkerProxies.DefaultWorkerProxy;\n\t\t}\n\n\t\tthis._logger = $config.logger || console.log;\n\n\t\tthis._workerTaskConcurrency = ($config.workerTaskConcurrency || 1) - 1;\n\t\tthis._maxWorkers = $config.maxWorkers || 4;\n\t\tthis._idleTimeout = $config.idleTimeout === false ? false : $config.idleTimeout;\n\t\tthis._taskTimeout = $config.taskTimeout || 0;\n\t\tthis._idleCheckInterval = $config.idleCheckInterval || 1000;\n\t\tthis._warmStart = $config.warmStart || false;\n\t\tthis._globals = $config.globals;\n\t\tthis._globalsInitializationFunction = $config.initialize;\n\t\tthis._debug = $config.debug;\n\t\tthis._log(`creating new pool : ${JSON.stringify($config)}`);\n\n\t\tthis._workers = [];\n\t\tthis._workersInitializing = [];\n\t\tthis._queue = [];\n\t\tthis._onWorkerTaskComplete = this._onWorkerTaskComplete.bind(this);\n\t\tthis._flushIdleWorkers = this._flushIdleWorkers.bind(this);\n\t\tthis._totalWorkersCreated = 0;\n\t\tthis._lastTaskTimeoutCheck = new Date();\n\n\t\tif (this._warmStart) {\n\t\t\tthis._log(`warm starting workers`);\n\n\t\t\tfor (var i = 0; i < this._maxWorkers; i++) {\n\t\t\t\tthis._createWorker();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic managerCount = 0;\n\tstatic taskCount = 0;\n\n\t_log (message) {\n\t\tif (this._debug) {\n\t\t\tthis._logger(`task.js:manager[managerId(${this.id})] ${message}`);\n\t\t}\n\t}\n\n\tgetActiveWorkerCount () {\n\t\treturn this._workersInitializing.length + this._workers.length;\n\t}\n\n\trun (task) {\n\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID !== 'number') {\n\t\t\tthis._idleCheckIntervalID = setInterval(this._flushIdleWorkers, this._idleCheckInterval);\n\t\t}\n\n\t\tif (!task.arguments || typeof task.arguments.length === 'undefined') {\n\t\t\tthrow new Error('task.js: \"arguments\" is required property, and it must be an array/array-like');\n\t\t}\n\n\t\tif (!task.function && (typeof task.function !== 'function' || typeof task.function !== 'string')) {\n\t\t\tthrow new Error('task.js: \"function\" is required property, and it must be a string or a function');\n\t\t}\n\n\t\tif (typeof task.arguments === 'object') {\n\t\t\ttask.arguments = Array.prototype.slice.call(task.arguments);\n\t\t}\n\n\t\ttask.id = ++WorkerManager.taskCount;\n\n\t\tthis._log(`added taskId(${task.id}) to the queue`);\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\ttask.resolve = resolve;\n\t\t\ttask.reject = reject;\n\t\t\tthis._queue.push(task);\n\t\t\tthis._next();\n\t\t}.bind(this));\n\t}\n\n\t_runOnWorker(worker, args, func) {\n\t\treturn new Promise (function (resolve, reject) {\n\t\t\tworker.run({\n\t\t\t\tid: ++WorkerManager.taskCount,\n\t\t\t\targuments: args,\n\t\t\t\tfunction: func,\n\t\t\t\tresolve: resolve,\n\t\t\t\treject: reject\n\t\t\t});\n\t\t});\n\t}\n\n\twrap (func, {useTransferables} = {useTransferables: false}) {\n\t\treturn function () {\n\t\t\tvar args = Array.from(arguments),\n\t\t\t\ttransferables = null;\n\n\t\t\tif (useTransferables) {\n\t\t\t\ttransferables = args.slice(-1)[0];\n\t\t\t\tif (!Array.isArray(transferables)) {\n\t\t\t\t\tthrow new Error('Task expects to be passed a transferables array as its last argument.')\n\t\t\t\t}\n\t\t\t\targs = args.slice(0, -1);\n\t\t\t}\n\n\t\t\treturn this.run({\n\t\t\t\targuments: args,\n\t\t\t\ttransferables,\n\t\t\t\tfunction: func\n\t\t\t});\n\t\t}.bind(this);\n\t}\n\n\tterminate () {\n\t\tthis._log(`terminated`);\n\n\t\t// kill idle timeout (if it exists)\n\t\tif (this._idleTimeout && typeof this._idleCheckIntervalID == 'number') {\n\t\t\tclearInterval(this._idleCheckIntervalID);\n\t\t\tthis._idleCheckIntervalID = null;\n\t\t}\n\n\t\t// terminate all existing workers\n\t\tthis._workers.forEach(function (worker) {\n\t\t\tworker.terminate();\n\t\t});\n\n\t\t// flush worker pool\n\t\tthis._workers = [];\n\t}\n\n\t_reissueTasksInTimedoutWorkers () {\n\t\tif (new Date () - this._lastTaskTimeoutCheck < 5000) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._lastTaskTimeoutCheck = new Date();\n\n\t\tthis._workers.forEach(worker => {\n\t\t\tworker.tasks.some(task => {\n\t\t\t\tif (new Date() - task.startTime >= this._taskTimeout) {\n\t\t\t\t\tworker.forceExit();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t_next = () => {\n\t\tif (this._taskTimeout) {\n\t\t\tthis._reissueTasksInTimedoutWorkers();\n\t\t}\n\n\t\tif (!this._queue.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet worker = this._getWorker();\n\n\t\tif (!worker) {\n\t\t\tsetTimeout(this._next, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tlet task = this._queue.shift();\n\t\tthis._log(`sending taskId(${task.id}) to workerId(${worker.id})`)\n\t\tworker.run(task);\n\t}\n\n\t_onWorkerTaskComplete = () => {\n\t\tthis._next();\n\t}\n\n\t_onWorkerExit = (worker) => {\n\t\tthis._log(`worker died, reissuing task`);\n\n\t\t// purge dead worker from pool\n\t\tthis._workers = this._workers.filter(item => item != worker);\n\n\t\t// add work back to queue\n\t\tworker.tasks.forEach(task => {\n\t\t\tthis._queue.push(task.$options);\n\t\t});\n\n\t\t// run tick\n\t\tthis._next();\n\t}\n\n\t_flushIdleWorkers () {\n\t\tthis._log(`flushing idle workers`);\n\t\tthis._workers = this._workers.filter(function (worker) {\n\t\t\tif (worker.tasks.length === 0 && new Date() - worker.lastTaskTimestamp > this._idleTimeout) {\n\t\t\t\tworker.terminate();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, this);\n\t}\n\n\t_getWorker () {\n\t\tlet idleWorkers = this._workers\n\t\t\t.filter(worker => worker.tasks.length <= this._workerTaskConcurrency)\n\t\t\t.sort((a, b) => a.tasks.length - b.tasks.length);\n\n\t\tif (idleWorkers.length) {\n\t\t\treturn idleWorkers[0];\n\t\t} else if (this._workers.length < this._maxWorkers && this._workersInitializing.length === 0) {\n\t\t\treturn this._createWorker();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t_createWorker () {\n\t\tvar workerId = ++this._totalWorkersCreated;\n\n\t\tlet worker = new this._WorkerProxy({\n\t\t\tdebug: this._debug,\n\t\t\tlogger: this._logger,\n\t\t\tid: workerId,\n\t\t\tmanagerId: this.id,\n\t\t\tonTaskComplete: this._onWorkerTaskComplete,\n\t\t\tonExit: this._onWorkerExit\n\t\t});\n\n\t\tif (this._globalsInitializationFunction || this._globals) {\n\t\t\tthis._log(`running global initialization code`);\n\t\t\tvar globalsInitializationFunction = `\n\t\t\t\tfunction (_globals) {\n\t\t\t\t\tglobals = (${(this._globalsInitializationFunction || function (globals) {return globals}).toString()})(_globals || {});\n\t\t\t\t}\n\t\t\t`.trim();\n\n\t\t\tthis._workersInitializing.push(worker);\n\t\t\tthis._runOnWorker(worker, [this._globals || {}], globalsInitializationFunction).then(function () {\n\t\t\t\tthis._workersInitializing = this._workersInitializing.filter(item => item != worker);\n\t\t\t\tthis._workers.push(worker);\n\t\t\t}.bind(this));\n\t\t\treturn null;\n\t\t} else {\n\t\t\tthis._workers.push(worker);\n\t\t\treturn worker;\n\t\t}\n\t}\n}\n\nmodule.exports = WorkerManager;\n\n\n// WEBPACK FOOTER //\n// ./src/WorkerManager.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 4\n// module chunks = 0","module.exports = function generateTaskFactoryMethod (defaults, WorkerProxy, WorkerManager) {\n\treturn function ($config, WorkerProxyOverride) {\n\t\tlet config = {};\n\n\t\t// clone defaults\n\t\tObject.keys(defaults).forEach(key => config[key] = defaults[key]);\n\n\t\t// apply user settings\n\t\tObject.keys($config).forEach(key => config[key] = $config[key]);\n\n\t\treturn new WorkerManager(config, WorkerProxyOverride || WorkerProxy);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/generateTaskFactoryMethod.js","import GeneralWorker from '../GeneralWorker';\n\nclass CompatibilityWorker extends GeneralWorker {\n\tconstructor () {\n\t\tsuper(...arguments);\n\n\t\tthis._setTimeoutID = null;\n\t}\n\n\tpostMessage = (message, options) => {\n\t\t// toss it out of the event loop\n\t\tthis._setTimeoutID = setTimeout(() => {\n\t\t\tlet args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\tlet functionBody = message.func.substring(message.func.indexOf('{') + 1, message.func.lastIndexOf('}')),\n\t\t\t\targNames = message.func.substring(message.func.indexOf('(') + 1, message.func.indexOf(')')).split(',');\n\n\t\t\tlet func = (new Function(...argNames, functionBody));\n\n\t\t\t// we cant use eval\n\t\t\ttry {\n\t\t\t\tlet result = func(...args);\n\t\t\t\tthis.handleWorkerMessage({id: message.id, result: result});\n\t\t\t} catch (error) {\n\t\t\t\tthis.handleWorkerMessage({id: message.id, 'error': error.stack});\n\t\t\t}\n\t\t}, 1);\n\t}\n\n\tterminate = () => {\n\t\tclearTimeout(this._setTimeoutID);\n\t\tthis._setTimeoutID = null;\n\t}\n}\n\nmodule.exports = CompatibilityWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/client/CompatibilityWorker.js","class GeneralWorker {\n\tconstructor ($config) {\n\t\tthis.id = $config.id;\n\t\tthis.managerId = $config.managerId;\n\t\tthis._debug = $config.debug;\n\t\tthis._logger = $config.logger;\n\n\t\tthis.tasks = [];\n\t\tthis.lastTaskTimestamp = null;\n\n\t\tthis._onTaskComplete = $config.onTaskComplete;\n\t\tthis._onExitHandler = $config.onExit;\n\t}\n\n\t_log (message) {\n\t\tif (this._debug) {\n\t\t\tthis._logger(`task.js:worker[managerId(${this.managerId}) workerId(${this.id})]: ${message}`);\n\t\t}\n\t}\n\n\thandleWorkerExit = () => {\n\t\tthis._log('killed');\n\t\tthis._onExitHandler(this);\n\t}\n\n\tforceExit = () => {\n\t\tthis._onExit();\n\t\tthis._worker.kill();\n\t}\n\n\thandleWorkerMessage = (message) => {\n\t\tlet taskIndex = null;\n\n\t\tthis.tasks.some(function (task, index) {\n\t\t\tif (message.id === task.id) {\n\t\t\t\ttaskIndex = index;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tif (taskIndex !== null) {\n\t\t\tvar task = this.tasks[taskIndex];\n\t\t\tif (message.error) {\n\t\t\t\tthis._log(`taskId(${task.id}) has thrown an error ${message.error}`);\n\t\t\t\ttask.reject(new Error(`task.js: ${message.error}`));\n\t\t\t} else {\n\t\t\t\tthis._log(`taskId(${task.id}) has completed`);\n\t\t\t\ttask.resolve(message.result);\n\t\t\t}\n\t\t\tthis._onTaskComplete(this);\n\t\t\tthis.tasks.splice(taskIndex, 1);\n\t\t}\n\t}\n\n\trun ($options) {\n\t\tthis.lastTaskTimestamp = new Date();\n\n\t\tlet task = {\n\t\t\tid: $options.id,\n\t\t\tstartTime: new Date(),\n\t\t\tresolve: $options.resolve,\n\t\t\treject: $options.reject,\n\t\t\t$options: $options\n\t\t};\n\n\t\tthis.tasks.push(task);\n\n\t\tlet message = {\n\t\t\tid: task.id,\n\t\t\tfunc: String($options.function)\n\t\t};\n\n\t\t// because of transferables (we want to keep this object flat)\n\t\tObject.keys($options.arguments).forEach(function (key, index) {\n\t\t\tmessage['argument' + index] = $options.arguments[index];\n\t\t});\n\n\t\tthis.postMessage(message, $options.transferables);\n\t}\n\n\t_purgeTasks(reason) {\n\t\tthis.tasks.forEach(task => {\n\t\t\ttask.reject(reason);\n\t\t});\n\t\tthis.tasks = [];\n\t}\n}\n\nmodule.exports = GeneralWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/GeneralWorker.js","import functionToObjectURL from './functionToObjectURL';\nimport GeneralWorker from '../GeneralWorker';\n\nclass WebWorker extends GeneralWorker {\n\tconstructor ($config) {\n\t\tsuper(...arguments);\n\n\t\tthis._worker = new Worker(functionToObjectURL(this.WORKER_SOURCE));\n\t\tthis._worker.addEventListener('message', this._onMessage);\n\n\t\tthis._log(`initialized`);\n\t}\n\n\tWORKER_SOURCE = `function () {\n\t\tonmessage = function (event) {\n\t\t\tvar message = event.data;\n\n\t\t\tvar args = Object.keys(message).filter(function (key) {\n\t\t\t\treturn key.match(/^argument/);\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn parseInt(a.slice(8), 10) - parseInt(b.slice(8), 10);\n\t\t\t}).map(function (key) {\n\t\t\t\treturn message[key];\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tvar result = eval('(' + message.func + ')').apply(null, args);\n\n\t\t\t\tif (typeof Promise != 'undefined' && result instanceof Promise) {\n\t\t\t\t\tresult.then(function (result) {\n\t\t\t\t\t\tpostMessage({id: message.id, result: result});\n\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\tpostMessage({id: message.id, error: error.stack});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tpostMessage({id: message.id, result: result});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tpostMessage({id: message.id, error: error.stack});\n\t\t\t}\n\t\t}\n\t}`;\n\n\t_onMessage = (event) => {\n\t\tlet message = event.data;\n\t\tthis.handleWorkerMessage(message);\n\t}\n\n\tpostMessage = (message, options) => {\n\t\tthis._log(`sending taskId(${message.id}) to worker process`);\n\t\tthis._worker.postMessage(message, options);\n\t}\n\n\tterminate = () => {\n\t\tthis._log(`terminated`);\n\t\tthis._worker.terminate();\n\t}\n}\n\nmodule.exports = WebWorker;\n\n\n// WEBPACK FOOTER //\n// ./src/client/WebWorker.js"],"sourceRoot":""}